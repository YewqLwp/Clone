function addAntiForgeryToken(n){n||(n={});var t=$("input[name=__RequestVerificationToken]");return t.length&&(n.__RequestVerificationToken=t.val()),n}function resetValidation(){$(".input-validation-error").addClass("input-validation-valid");$(".input-validation-error").removeClass("input-validation-error");$(".field-validation-error").addClass("field-validation-valid");$(".field-validation-error").removeClass("field-validation-error");$(".validation-summary-errors").addClass("validation-summary-valid");$(".validation-summary-errors").removeClass("validation-summary-errors")}function removeComma(n){return n!==null?n.replace(/\,/g,""):n}function showHideTawkChat(){$(window).height()<350||$(window).width()<768?$("#tawkchat-iframe-container").addClass("hidden"):$("#tawkchat-iframe-container").removeClass("hidden")}function showScreenSize(){$("#foo").show();$("#foo").html($(window).width()+"x"+$(window).height());$("#foo").fadeOut(3e3)}function plusSlides(n,t){showSlides(slideIndex+=n,t)}function showSlides(n,t){var r,i=document.getElementsByClassName(t+"Slides");if(i!==null){for(n>i.length&&(slideIndex=1),n<1&&(slideIndex=i.length),r=0;r<i.length;r++)i[r].style.display="none";i[slideIndex-1].style.display="block"}}function OpenFeatureModal(n){$("#FeaturesecondDegreeModal").modal();showSlides(slideIndex=n,"Feature");$("#featureScroller").trigger("stop.owl.autoplay");$("#ForYouScroller").trigger("stop.owl.autoplay")}function OpenForYouModal(n){$("#ForYousecondDegreeModal").modal();showSlides(slideIndex=n,"ForYou");$("#featureScroller").trigger("stop.owl.autoplay");$("#ForYouScroller").trigger("stop.owl.autoplay")}function getParameterByName(n,t){t||(t=window.location.href);n=n.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function topFunction(){document.body.scrollTop=0;document.documentElement.scrollTop=0}$(window).resize(function(){});$(document).ready(function(){var n=function(){var n=0;return function(t,i){clearTimeout(n);n=setTimeout(t,i)}}();$(".rentalModelButton").webuiPopover({content:"Rental",placement:"top",trigger:"hover"});$(".IOModelButton").webuiPopover({content:"Incremental Ownership",placement:"top",trigger:"hover"});$(".STOModelButton").webuiPopover({content:"Share-to-Own",placement:"top",trigger:"hover"});$(".rentalModelButton,.IOModelButton,.STOModelButton").on("click",function(n){$(this).webuiPopover("show");n.preventDefault()});$(".infoPopover").webuiPopover({trigger:"hover"});$(".btnMainPageForSale").on("click",function(){$("#forsale-price-slider").show();$("#forrent-price-slider").hide()});$(".btnMainPageForRent").on("click",function(){$("#forrent-price-slider").show();$("#forsale-price-slider").hide()});$(function(){$(".topbanner-img").dataImg({med:768,lrg:1e3,resize:!0,bgImg:!0})});$(".numberonly").keydown(function(n){$.inArray(n.keyCode,[46,8,9,27,13,110,188,190])!==-1||n.keyCode==65&&(n.ctrlKey===!0||n.metaKey===!0)||n.keyCode>=35&&n.keyCode<=40||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()});$(".modal").on("show.bs.modal",function(){$(document).height()>$(window).height()?$("body").addClass("modal-open-noscroll"):$("body").removeClass("modal-open-noscroll")});$(".modal").on("hide.bs.modal",function(){$("body").removeClass("modal-open-noscroll")});$("#btnSubmit").on("click",function(n){if(n.preventDefault(),$("#mainForm").valid())return $("#loader").show(),$.ajax({url:$("#mainForm").attr("action"),type:"POST",data:$("#mainForm").serialize(),success:function(n){$("#loader").hide();n.bSuccess==!0?(reloadUrl!=null&&$("#result").load(reloadUrl),notif({msg:n.sMessage,type:"success",position:"center"}),window.location.href.includes("Dashboard")&&(window.location.href="Portfolio")):notif({msg:n.sMessage,type:"error",position:"center"})},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1});$("#btnSubmit2").on("click",function(n){if(n.preventDefault(),$("#mainForm").valid())return $("#loader").show(),$.ajax({url:$("#mainForm").attr("action"),type:"POST",data:$("#mainForm").serialize(),success:function(n){$("#loader").hide();n.bSuccess==!0?reloadUrl!=null?window.location.href=n.sMessage!=""?reloadUrl+"?"+n.sMessage:reloadUrl:notif({msg:n.sMessage,type:"success",position:"center"}):notif({msg:n.sMessage,type:"error",position:"center"})},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1});$("#btnSubmitPay1").on("click",function(n){if(n.preventDefault(),$("#mainForm").valid())return $("#loader").show(),$.ajax({url:$("#mainForm").attr("action"),type:"POST",data:$("#mainForm").serialize(),success:function(n){$("#loader").hide();n.bSuccess==!0?$("#divPayment").html(n.sMessage):notif({msg:n.sMessage,type:"error",position:"center"})},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1});$("#btnVerify").on("click",function(n){if(n.preventDefault(),$("#mainForm").valid()){var t=$("#mainForm")[0];return $("#loader").show(),$.ajax({url:$("#mainForm").attr("action"),type:"POST",data:new FormData(t),cache:!1,contentType:!1,processData:!1,success:function(n){var i,t;$("#loader").hide();i=!0;n.bSuccess==!0?(reloadUrl!=null&&(n.sMessage!=""?(window.location.href=reloadUrl+"?id="+n.sMessage,i=!1):window.location.href=reloadUrl),i&&notif({msg:n.sMessage,type:"success",position:"center"})):(t=n.sMessage,reloadErrUrl!=null&&n.sMessage!=""&&(n.sMessage=="UploadBoth"?t="Please upload both Front and Back IC in order to proceed!":n.sMessage=="UploadPSP"?t="Please upload Passport Image in order to proceed!":n.sMessage=="VerifyAgain"?t="Verification Fail. Please try again!":n.sMessage=="ExpectionError"?t="Exception verification. Please try again!":(window.location.href=reloadErrUrl+"?id="+n.sMessage,t="Failed to verify")),notif({msg:t,type:"error",position:"center"}))},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1}});$("#btnSubmitGET").on("click",function(n){return n.preventDefault(),$("#loader").show(),$.ajax({url:$(this).attr("href"),type:"GET",success:function(n){$("#loader").hide();n.bSuccess==!0?notif({msg:n.sMessage,type:"success",position:"center"}):notif({msg:n.sMessage,type:"error",position:"center"})},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1});$("#btnSendChat").on("click",function(n){if(n.preventDefault(),$("#mainForm").valid())return $("#loader").show(),$.ajax({url:$("#mainForm").attr("action"),type:"POST",data:$("#mainForm").serialize(),success:function(n){$("#loader").hide();n.bSuccess==!0?($("#chatmsgid").val(""),reloadUrl!=null&&$("#result").load(reloadUrl)):notif({msg:n.sMessage,type:"error",position:"center"})},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1});$("#result").on("click",".btnDelete",function(n){var i,r,t;return confirm("Are you sure you want to delete this item?")?(i=!1,r=$(this).closest("tr"),n.preventDefault(),t={id:this.id},addAntiForgeryToken(t),$("#loader").show(),$.ajax({url:$(this.closest("form")).attr("action"),type:"POST",data:t,success:function(n){$("#loader").hide();n.bSuccess==!0?(i=!0,r.remove(),notif({msg:n.sMessage,type:"success",position:"center"})):notif({msg:n.sMessage,type:"error",position:"center"})},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1):!1});$(".btnSendMessage").on("click",function(n){n.preventDefault();var t=$(this.closest("form"));if(t.valid())return resetValidation(),$("#loader").show(),$.ajax({url:t.attr("action"),type:"POST",data:t.serialize(),success:function(n){n.bSuccess==!0?($("#loader").hide(),notif({msg:n.sMessage,type:"success",position:"center"})):($("#loader").hide(),notif({msg:n.sMessage,type:"error",position:"center"}))},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1});$("#FeatureSlides, #ForYouSlides, #listingList, #result").on("click",".btnShortlist",function(n){var f=!1,t=$(this),r="",i=!0,u;return t.prop("disabled",!0),n.preventDefault(),u={id:this.id},t.hasClass("Shortlist")&&(i=!1),r=i?"/Dashboard/Shortlist":"/Dashboard/DeleteShortlist",$("#loader").show(),$.ajax({url:lang+r,type:"POST",data:u,success:function(n){$("#loader").hide();t.prop("disabled",!1);n.bSuccess==!0?(f=!0,i?(t.addClass("Shortlist"),t.children().children().first().hide(),t.children().children().last().show()):(t.removeClass("Shortlist"),t.children().children().first().show(),t.children().children().last().hide())):notif({msg:"Please login to shortlist properties.",type:"error",position:"center"})},error:function(){$("#loader").hide();t.prop("disabled",!1);notif({msg:"An error has occured",type:"error",position:"center"})}}),!1});$("#FeatureSlides, #ForYouSlides, #listingList, #result").on("click",".btnLike",function(n){var f=!1,t=$(this),r="",i=!0,u;return t.prop("disabled",!0),n.preventDefault(),u={id:this.id},t.hasClass("liked")&&(i=!1),r=i?"/Dashboard/Like":"/Dashboard/Unlike",$("#loader").show(),$.ajax({url:lang+r,type:"POST",data:u,success:function(n){if($("#loader").hide(),t.prop("disabled",!1),n.bSuccess==!0){f=!0;var r=t.closest(".propertydetail").find(".likecount").html();i?(t.addClass("liked"),t.children().children().first().hide(),t.children().children().last().show(),t.closest(".propertydetail").find(".likecount").html(parseInt(r)+1)):(t.removeClass("liked"),t.children().children().first().show(),t.children().children().last().hide(),t.closest(".propertydetail").find(".likecount").html(parseInt(r)-1))}},error:function(){$("#loader").hide();t.prop("disabled",!1);notif({msg:"An error has occured",type:"error",position:"center"})}}),!1});$("#result").on("click",".btnFeatured",function(n){var u=!1,t=$(this),i="/Listing/FeatureListing",r;return n.preventDefault(),r={id:this.id},t.hasClass("featuredIcon")&&(i="/Listing/RemoveFeatureListing"),$("#loader").show(),$.ajax({url:lang+i,type:"POST",data:r,success:function(n){$("#loader").hide();n.bSuccess==!0?(u=!0,t.hasClass("featuredIcon")==!1?(t.addClass("featuredIcon"),t.prop("title","Remove from Featured Listing")):(t.removeClass("featuredIcon"),t.prop("title","Set as Featured Listing")),notif({msg:n.sMessage,type:"success",position:"center"})):notif({msg:n.sMessage,type:"error",position:"center"})},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1});$("#result").on("click",".btnArchive",function(n){var r=!1,t=$(this),i;return n.preventDefault(),i={id:this.id},$("#loader").show(),$.ajax({url:lang+"/Listing/ArchiveListing",type:"POST",data:i,success:function(n){$("#loader").hide();n.bSuccess==!0?(r=!0,t.closest(".listings").parent().parent().addClass("hidden"),t.closest(".listings").data("showlisting","0"),notif({msg:n.sMessage,type:"success",position:"center"}),setTimeout(function(){window.location.reload()},1500)):notif({msg:n.sMessage,type:"error",position:"center"})},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1});$("#result").on("click",".btnDeleteListing",function(n){var i,t,r;return confirm("Are you sure you want to delete this item?")?(i=!1,t=$(this),n.preventDefault(),r={id:this.id},$("#loader").show(),$.ajax({url:lang+"/Listing/DeleteListing",type:"POST",data:r,success:function(n){$("#loader").hide();n.bSuccess==!0?(i=!0,t.closest(".listings").parent().parent().addClass("hidden"),t.closest(".listings").data("showlisting","0"),notif({msg:n.sMessage,type:"success",position:"center"}),setTimeout(function(){window.location.reload()},1500)):notif({msg:n.sMessage,type:"error",position:"center"})},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1):!1});$("#result").on("click",".btnReactivate",function(n){var r=!1,t=$(this),i;return n.preventDefault(),i={id:this.id},$("#loader").show(),$.ajax({url:lang+"/Listing/ReactivateListing",type:"POST",data:i,success:function(n){$("#loader").hide();n.bSuccess==!0?(r=!0,t.closest(".listings").parent().parent().addClass("hidden"),t.closest(".listings").data("showlisting","0"),notif({msg:n.sMessage,type:"success",position:"center"}),setTimeout(function(){window.location.reload()},1500)):notif({msg:n.sMessage,type:"error",position:"center"})},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1});$("#result").on("click",".btnDeleteShortlist",function(n){var t,i,r;return confirm("Are you sure you want to delete this item?")?(t=!1,i=$(this),n.preventDefault(),r={id:this.id},$("#loader").show(),$.ajax({url:lang+"/Dashboard/DeleteShortlist",type:"POST",data:r,success:function(n){$("#loader").hide();n.bSuccess==!0?(t=!0,i.closest(".listings").parent().parent().addClass("hidden"),notif({msg:n.sMessage,type:"success",position:"center"})):notif({msg:n.sMessage,type:"error",position:"center"})},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1):!1});$("#result").on("click",".btnDeleteAgentMessage",function(n){var t,i,r;return confirm("Are you sure you want to delete this item?")?(t=!1,i=$(this),n.preventDefault(),r={id:this.id},$("#loader").show(),$.ajax({url:lang+"/Dashboard/DeleteMessage",type:"POST",data:r,success:function(n){$("#loader").hide();n.bSuccess==!0?(t=!0,i.closest(".listings").parent().parent().addClass("hidden"),notif({msg:n.sMessage,type:"success",position:"center"})):notif({msg:n.sMessage,type:"error",position:"center"})},error:function(){$("#loader").hide();notif({msg:"An error has occured",type:"error",position:"center"})}}),!1):!1});$("#FeaturesecondDegreeModal").on("hidden.bs.modal",function(){$("#featureScroller").trigger("play.owl.autoplay");$("#ForYouScroller").trigger("play.owl.autoplay")});$("#FeaturesecondDegreeModal").on("hidden.bs.modal",function(){$("#featureScroller").trigger("stop.owl.autoplay");$("#ForYouScroller").trigger("stop.owl.autoplay")});$(function(){function i(){t.removeClass("active");$(this).addClass("active")}$(".FeatureSecondDegree").owlCarousel({items:1,loop:!0,margin:10,nav:!0,video:!0,videoHeight:315,videoWidth:560,lazyLoad:!0,lazyLoadEager:1,center:!0,autoHeight:!0});$(".ForYouSecondDegree").owlCarousel({items:1,loop:!0,margin:10,nav:!0,video:!0,videoHeight:315,videoWidth:560,lazyLoad:!0,lazyLoadEager:1,center:!0,autoHeight:!0});$("#featureScroller").owlCarousel({items:4,merge:!0,loop:!1,nav:!1,dots:!1,autoplay:!0,autoplaySpeed:3e3,autoplayTimeout:4e3,autoplayHoverPause:!0,responsive:{0:{items:1},760:{items:2},1160:{items:3},1560:{items:4}}});$("#ForYouScroller").owlCarousel({items:3,merge:!0,loop:!0,nav:!1,dots:!1,autoplay:!0,autoplaySpeed:3e3,autoplayTimeout:4e3,autoplayHoverPause:!0,responsive:{0:{items:1},760:{items:2},1160:{items:3},1560:{items:4}}});$("#WalletGuideScroller").owlCarousel({items:2,loop:!1,nav:!0,mouseDrag:!1,navText:["<div class='nav-btn prev-slide'><\/div>","<div class='nav-btn next-slide'><\/div>"],dots:!1,responsive:{0:{items:1},1400:{items:2},1860:{items:3},2100:{items:4}}});$("#AboutScroller").owlCarousel({items:1,dots:!0,mouseDrag:!1,responsive:{0:{items:1}}});$("#HeroBannerScroller").owlCarousel({items:1,dots:!1,loop:!0,nav:!1,dots:!1,mouseDrag:!1,autoplay:!0,autoplaySpeed:6e3,autoplayTimeout:7e3,autoplayHoverPause:!0,responsive:{0:{items:1}}});$("#AboutImageScroller ").owlCarousel({items:1,dots:!1,mouseDrag:!1,responsive:{0:{items:1}}});$("#HeroBannerImageScroller ").owlCarousel({items:1,dots:!1,mouseDrag:!1,loop:!0,responsive:{0:{items:1}}});var t=$(".accordionItem"),n=$(".owl-carousel");n.owlCarousel();$(".rightButton").on("click",function(){n.trigger("next.owl.carousel")});$(".leftButton").on("click",function(){n.trigger("prev.owl.carousel")});$(".rental-rightButton").on("click",function(){n.trigger("next.owl.carousel")});$(".rental-leftButton").on("click",function(){n.trigger("prev.owl.carousel")});t.on("click",i)})});var slideIndex=1;$(document).on("click",".openEditUserModal",function(){var n=$(this).data("id"),i=$(this).data("personname"),r=$(this).data("usertype"),t={id:n};$("#loader").show();$.ajax({url:lang+"/AdminDiFang/GetUser",type:"GET",data:t,success:function(n){$("#loader").hide();$("#PersonName").text(n.Name);$("#UserTypeList").val(n.UserType);$("#PersonID").val(n.PersonID)}})});$(document).on("click",".openViewUserInfoModal",function(){var n=$(this).data("id"),t={id:n};$("#loader").show();$.ajax({url:lang+"/AdminDiFang/GetUserInfo",type:"GET",data:t,success:function(n){$("#loader").hide();console.log(n);$("#PersonNameView").text(n.Name);$("#PersonID").val(n.PersonID);$("#PhoneNo").text(n.Phone);$("#Address").text(n.Address);$("#PostCodeView").text(n.PostCode);$("#Country").text(n.Country);$("#BankInfo").text(n.BankInfo)}})});$(document).on("click",".openUpdateInfoModal",function(){var t=$(this).data("id"),n={id:t};$("#ErrorMsgAddress").text("");$("#ErrorMsgPropertyName").text("");t!=$("#PID").val()&&($("#PID").val(""),$("#rentalID").val(""),$("#propertyName").val(""),$("#address").val(""),$("#propertyPrice").val(""),$("#monthRental").val(""),$("#securityDeposit").val(""),$("#rentalIncomePercent").val(""),$("#salesNpurchase").val(""),$("#contractual").val(""),$("#propertyImage").val(""),$("#tenant").val(""),$("#propertyImg").removeAttr("src"),$("#propertyImg").css("display","none"),$("#salesNpurchaseDoc").css("display","none"),$("#salesNpurchaseDoc").removeAttr("href"),$("#contractualDoc").removeAttr("href"),$("#contractualDoc").css("display","none"),$("#tenantDoc").css("display","none"),$("#tenantDoc").removeAttr("href"));$("#loader").show();$.ajax({url:lang+"/AdminDiFang/GetUser",type:"GET",data:n,success:function(n){$("#loader").hide();$("#PName").text(n.Name);$("#PID").val(n.PersonID)}});$.ajax({url:lang+"/AdminDiFang/GetUserRentalInfo",type:"GET",data:n,success:function(n){$("#loader").hide();n!=null&&($("#PID").val(n.PersonID),$("#rentalID").val(n.RentalPropertyID),$("#propertyName").val(n.PropertyName),$("#address").val(n.PropertyAddress),$("#propertyPrice").val(n.PropertyPrice),$("#monthRental").val(n.MonthlyRental),$("#securityDeposit").val(n.SecurityDeposit),$("#rentalIncomePercent").val(n.RentalIncomePercent),$("#propertyImg").attr("src",n.PropertyPhotoPath),$("#salesNpurchaseDoc").attr("href","/AdminDifang/ViewFile?id="+n.RentalPropertyID+"&fileType=sNp"),$("#contractualDoc").attr("href","/AdminDifang/ViewFile?id="+n.RentalPropertyID+"&fileType=contractual"),$("#tenantDoc").attr("href","/AdminDifang/ViewFile?id="+n.RentalPropertyID+"&fileType=tenancy"))}});$.ajax({url:lang+"/AdminDiFang/CheckDocument",type:"GET",data:n,success:function(n){$("#loader").hide();n!=null&&(n.snp==1&&$("#salesNpurchaseDoc").css("display","block"),n.con==1&&$("#contractualDoc").css("display","block"),n.ten==1&&$("#tenantDoc").css("display","block"),n.photo==1&&$("#propertyImg").css("display","block"))}})});$(document).on("click",".openEditRentalModal",function(){var n=$(this).data("id"),t={id:n};$("#loader").show();$.ajax({url:lang+"/AdminDiFang/GetRentalDocUser",type:"GET",data:t,success:function(t){$("#loader").hide();$("#rdPropertyName").text(t.PropertyName);$("#rdAddress").text(t.Address);$("#rdPrice").text(t.RentalAmount);$("#rdPersonName").text(t.PersonName);$("#rdRentalID").val(t.RentalID);$("#rdPersonID").val(t.PersonID);$("#rdRentalStatusDesc").text(t.RentalStatusDesc);$("#rdSalarySlip").attr("href","/AdminDifang/DownLoadFile?id="+n)}})});const formatToCurrency=n=>n.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");$(document).on("click",".openApproveListingModal",function(){var n=$(this).data("id"),t={id:n};$("#loader").show();$.ajax({url:lang+"/AdminDiFang/GetOwnershipDocUser",type:"GET",data:t,success:function(t){$("#loader").hide();$("#rdListingID").val(t.ListingID);$("#rdPersonID").val(t.PersonID);$("#rdPersonName").text(t.PersonName);$("#rdPropertyName").text(t.PropertyName);$("#rdAddress").text(t.Address);$("#rdOwnershipDocument").attr("href","/AdminDifang/DownloadProveOfOwnership?id="+n)}})});$(document).ready(function(){})